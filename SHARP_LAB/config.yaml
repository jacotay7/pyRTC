loop:
  leakyGain: 0.01
  gain: 0.25
  pokeAmp: 0.02
  numItersIM: 50
  numDroppedModes: 0
  nLoop: 10000
  affinity: 2
  IMMethod: push-pull
  IMFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/IM.npy" #"/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/IM.npy"
  m2cFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/m2c_kl.npy"
  logdir: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/PPO_MLP_LSTM_ALL_MODES/"
  learningTimesteps: 1000000
  actionNorm: 1200
  entropyCoef: 0.00
  learningRate: 0.0003
  linearActionNorm: 1
  modelName: ""
  isTraining: False
  justLinReward: True
  functions:
    - leakyIntegrator

# loop:
#   pokeAmp: 0.02
#   gain: 0.005
#   leakyGain: 0.000
#   numDroppedModes: 30
#   numItersIM: 50
#   affinity: 2
#   IMMethod: push-pull
#   IMFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/IM.npy"
#   functions:
#     - leakyIntegrator

wfs:
  name: XIMEA
  serial: "46052550"
  binning: 1 #2
  exposure: 2000
  gain: 0
  bitDepth: 10
  left: 432 #448 #416 #
  top: 280 
  width: 400 
  height: 400 
  darkCount: 2000
  darkFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/dark.npy"
  dm_mask: "" #Please save the dm mask for valid actuators here (bool)
  affinity: 3
  functions:
  - expose

slopes:
  type: SHWFS
  signalType: slopes
  refSlopesFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/ref.npy"
  validSubApsFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/validSubAps.npy"
  subApSpacing: 15.54 #7.78
  subApOffsetX: 4
  subApOffsetY: 8
  imageNoise: 0.5
  contrast: 20
  affinity: 4
  functions:
  - computeSignal

wfc:
  name: "ALPAO"
  serial: "BAX118"
  numActuators: 97
  numModes: 94
  flatFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/wfcShape.npy"
  saveFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/wfcShape.npy"
  m2cFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/m2c_kl.npy" #.npy" 
  floatingActuatorsFile: "" #"/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/floating_actuators_indices.npy"
  floatingInfluenceRadius: 1
  affinity: 5
  commandCap: 0.8
  hardwareDelay: 0.001 #seconds
  frameDelay: 0
  functions:
  - sendToHardware

psf:
  name: "FLIR"
  index: 0
  exposure: 300
  gain: 0
  bitDepth: 16
  left: 920
  top: 436
  width: 128
  height: 128
  darkCount: 2000
  darkFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/psfDark.npy"
  modelFile: "/home/whetstone/RLAO/pyRTC/SHARP_LAB/calib/modelPSF.npy"
  integration: 2
  affinity: 6
  functions:
  - expose
  - integrate
  - computeStrehl

modulator:
  name: 'E-727'
  libFolder: '/opt/PI/lib64/'
  digitalFreq: 20000 #Hz
  frequency: 300 #Hz
  amplitude: 1000
  relativeAmplitude: 1
  offsetX: 2500
  offsetY: 2500
  phaseOffset: 0
  servosOn: True
  autoZero: True


optimizer:
  name: "NCPA"
  logdir: "ncpa_optimizer_tensorboard"
  numSteps: 100
  startMode: 0
  endMode: 20
  correctionMag: 0.003
  numReads: 10
  affinity: 10